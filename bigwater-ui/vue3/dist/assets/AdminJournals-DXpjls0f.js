import{_ as A,r as d,o as H,c as _,a as M,b as u,w as I,A as z,g as R,d as e,e as x,f as C,t as a,h as n,v as S,i,n as m,F as V,j as $,k as W,l as q,u as Y,m as G}from"./index-CUFKAekg.js";const O={class:"p-4 lg:p-6"},Q={class:"flex items-center justify-between mb-6"},K={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},X={class:"card p-6 rounded-2xl"},Z={class:"flex items-center"},j={class:"ml-4"},ee={class:"text-2xl font-bold text-deep-ocean"},te={class:"card p-6 rounded-2xl"},se={class:"flex items-center"},le={class:"ml-4"},oe={class:"text-2xl font-bold text-deep-ocean"},ae={class:"card p-6 rounded-2xl"},re={class:"flex items-center"},ne={class:"ml-4"},de={class:"text-2xl font-bold text-deep-ocean"},ie={class:"card p-6 rounded-2xl mb-6"},ue={class:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0 md:space-x-4"},pe={class:"flex space-x-4"},ce={class:"flex items-center space-x-2"},xe={class:"card p-6 rounded-2xl"},be={class:"flex items-center justify-between mb-6"},me={class:"flex space-x-2"},ve={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},ge={class:"flex items-center justify-between mb-3"},ye={class:"text-xs text-gray-500"},fe={class:"font-semibold text-deep-ocean mb-2 line-clamp-2"},we={class:"text-sm text-gray-600 mb-3 line-clamp-3"},he={class:"flex items-center justify-between text-xs text-gray-500 mb-3"},ke={class:"flex space-x-2"},De=["onClick"],_e=["onClick"],Ce=["onClick"],Se={key:1,class:"overflow-x-auto"},Ue={class:"w-full"},Ee={class:"py-3 px-4 text-sm font-medium text-deep-ocean"},Je={class:"py-3 px-4"},Le={class:"text-sm font-medium text-gray-900"},Pe={class:"text-xs text-gray-500"},Be={class:"py-3 px-4"},Ve={class:"py-3 px-4 text-sm text-gray-900"},$e={class:"py-3 px-4 text-sm text-gray-900"},Fe={class:"py-3 px-4"},Ne={class:"flex space-x-2"},Te=["onClick"],Ae=["onClick"],He=["onClick"],Me={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ie={class:"bg-white rounded-2xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto"},ze={class:"text-lg font-bold text-deep-ocean mb-4"},Re={class:"grid grid-cols-2 gap-4"},We={class:"grid grid-cols-2 gap-4"},qe={class:"flex space-x-3 pt-4"},Ye={type:"submit",class:"flex-1 btn-primary"},Ge={__name:"AdminJournals",setup(Oe){const w=d(!1),p=d(null),v=d(""),g=d(""),y=d(""),f=d(""),b=d("grid"),o=d({weekNumber:"",title:"",excerpt:"",content:"",publishDate:"",status:"DRAFT",featured:!1,tags:""}),c=d([]),h=async()=>{try{const l=await R();l.success?c.value=l.data||[]:console.error("Failed to load journals:",l.message)}catch(l){console.error("Error loading journals:",l)}};H(()=>{h()});const F=_(()=>c.value.filter(l=>l.status==="PUBLISHED")),N=_(()=>c.value.filter(l=>l.status==="DRAFT")),U=_(()=>{let l=c.value;if(v.value){const t=v.value.toUpperCase();l=l.filter(s=>s.status===t)}if(g.value){const t=g.value.toLowerCase();l=l.filter(s=>s.title.toLowerCase().includes(t)||s.excerpt.toLowerCase().includes(t)||s.tags.toLowerCase().includes(t))}return y.value&&f.value&&(l=l.filter(t=>{if(!t.publishDate)return!1;const s=typeof t.publishDate=="string"&&t.publishDate.length>10?t.publishDate.slice(0,10):t.publishDate,r=new Date(s),k=new Date(y.value),D=new Date(f.value);return!isNaN(r)&&r>=k&&r<=D})),l.sort((t,s)=>s.weekNumber-t.weekNumber)}),E=l=>l?typeof l=="string"&&l.length>10?l.slice(0,10):l:"",J=l=>{p.value=l,o.value={weekNumber:l.weekNumber,title:l.title,excerpt:l.excerpt,content:l.content,publishDate:l.publishDate?String(l.publishDate).slice(0,10):"",status:l.status,featured:l.featured,tags:l.tags}},L=()=>{w.value=!1,p.value=null,o.value={weekNumber:"",title:"",excerpt:"",content:"",publishDate:"",status:"DRAFT",featured:!1,tags:""}},T=async()=>{try{const l={...o.value,publishDate:o.value.publishDate?`${o.value.publishDate}T00:00:00`:null};if(p.value){const t=await Y(p.value.id,l);t.success?(await h(),alert("Journal updated successfully!")):alert("Failed to update journal: "+t.message)}else{const t=await G(l);t.success?(await h(),alert("Journal created successfully!")):alert("Failed to create journal: "+t.message)}L()}catch(l){console.error("Error saving journal:",l),alert("Error saving journal. Please try again.")}},P=l=>{if(l.status==="PUBLISHED")l.status="DRAFT";else{l.status="PUBLISHED";const s=new Date,r=s.getFullYear(),k=String(s.getMonth()+1).padStart(2,"0"),D=String(s.getDate()).padStart(2,"0");l.publishDate=`${r}-${k}-${D}T00:00:00`}const t=new Date().toISOString().slice(0,10);l.updatedAt=t},B=async l=>{if(confirm(`Are you sure you want to delete "${l.title}"? This action cannot be undone.`))try{const t=await q(l.id);if(t.success){const s=c.value.findIndex(r=>r.id===l.id);s!==-1&&c.value.splice(s,1),alert("Journal deleted successfully!")}else alert("Failed to delete journal: "+t.message)}catch(t){console.error("Error deleting journal:",t),alert("Error deleting journal. Please try again.")}};return(l,t)=>(u(),M(z,null,{default:I(()=>[e("div",O,[e("div",Q,[e("button",{onClick:t[0]||(t[0]=s=>w.value=!0),class:"btn-primary"}," Create New Journal ")]),e("div",K,[e("div",X,[e("div",Z,[t[16]||(t[16]=e("div",{class:"p-3 rounded-full bg-blue-100"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})])],-1)),e("div",j,[t[15]||(t[15]=e("p",{class:"text-sm text-gray-600"},"Total Journals",-1)),e("p",ee,a(c.value.length),1)])])]),e("div",te,[e("div",se,[t[18]||(t[18]=e("div",{class:"p-3 rounded-full bg-green-100"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})])],-1)),e("div",le,[t[17]||(t[17]=e("p",{class:"text-sm text-gray-600"},"Published",-1)),e("p",oe,a(F.value.length),1)])])]),e("div",ae,[e("div",re,[t[20]||(t[20]=e("div",{class:"p-3 rounded-full bg-yellow-100"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),e("div",ne,[t[19]||(t[19]=e("p",{class:"text-sm text-gray-600"},"Drafts",-1)),e("p",de,a(N.value.length),1)])])]),t[21]||(t[21]=e("div",{class:"card p-6 rounded-2xl"},[e("div",{class:"flex items-center"},[e("div",{class:"p-3 rounded-full bg-purple-100"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})])]),e("div",{class:"ml-4"},[e("p",{class:"text-sm text-gray-600"},"Total Views"),e("p",{class:"text-2xl font-bold text-deep-ocean"},"12,847")])])],-1))]),e("div",ie,[e("div",ue,[e("div",pe,[n(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>v.value=s),class:"border border-gray-300 rounded-lg px-3 py-2 text-sm"},[...t[22]||(t[22]=[e("option",{value:""},"All Status",-1),e("option",{value:"PUBLISHED"},"Published",-1),e("option",{value:"DRAFT"},"Draft",-1),e("option",{value:"SCHEDULED"},"Scheduled",-1)])],512),[[S,v.value]]),n(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>g.value=s),type:"text",placeholder:"Search journals...",class:"border border-gray-300 rounded-lg px-3 py-2 text-sm w-64"},null,512),[[i,g.value]])]),e("div",ce,[t[23]||(t[23]=e("span",{class:"text-sm text-gray-600"},"Week Range:",-1)),n(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>y.value=s),type:"date",class:"border border-gray-300 rounded-lg px-3 py-2 text-sm"},null,512),[[i,y.value]]),t[24]||(t[24]=e("span",{class:"text-sm text-gray-600"},"to",-1)),n(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>f.value=s),type:"date",class:"border border-gray-300 rounded-lg px-3 py-2 text-sm"},null,512),[[i,f.value]])])])]),e("div",xe,[e("div",be,[t[25]||(t[25]=e("h3",{class:"text-lg font-bold text-deep-ocean"},"Weekly Journals",-1)),e("div",me,[e("button",{class:m(`px-3 py-1 rounded-lg text-sm ${b.value==="grid"?"bg-ocean text-white":"bg-gray-200 text-gray-700"}`),onClick:t[5]||(t[5]=s=>b.value="grid")}," Grid ",2),e("button",{class:m(`px-3 py-1 rounded-lg text-sm ${b.value==="list"?"bg-ocean text-white":"bg-gray-200 text-gray-700"}`),onClick:t[6]||(t[6]=s=>b.value="list")}," List ",2)])]),b.value==="grid"?(u(),x("div",ve,[(u(!0),x(V,null,$(U.value,s=>(u(),x("div",{key:s.id,class:"border border-gray-200 rounded-lg p-4 hover:shadow-lg transition-shadow"},[e("div",ge,[e("span",{class:m(`px-2 py-1 rounded-full text-xs font-medium ${s.status==="PUBLISHED"?"bg-green-100 text-green-800":s.status==="DRAFT"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`)},a(s.status),3),e("span",ye,"Week "+a(s.weekNumber),1)]),e("h4",fe,a(s.title),1),e("p",we,a(s.excerpt),1),e("div",he,[e("span",null,a(E(s.publishDate)),1),e("span",null,a(s.views)+" views",1)]),e("div",ke,[e("button",{onClick:r=>J(s),class:"flex-1 text-blue-600 hover:text-blue-800 text-sm py-1"}," Edit ",8,De),e("button",{onClick:r=>P(s),class:m(`flex-1 text-sm py-1 ${s.status==="PUBLISHED"?"text-orange-600 hover:text-orange-800":"text-green-600 hover:text-green-800"}`)},a(s.status==="PUBLISHED"?"Unpublish":"Publish"),11,_e),e("button",{onClick:r=>B(s),class:"flex-1 text-red-600 hover:text-red-800 text-sm py-1"}," Delete ",8,Ce)])]))),128))])):C("",!0),b.value==="list"?(u(),x("div",Se,[e("table",Ue,[t[26]||(t[26]=e("thead",null,[e("tr",{class:"border-b border-gray-200"},[e("th",{class:"text-left py-3 px-4 text-sm font-semibold text-gray-700"},"Week"),e("th",{class:"text-left py-3 px-4 text-sm font-semibold text-gray-700"},"Title"),e("th",{class:"text-left py-3 px-4 text-sm font-semibold text-gray-700"},"Status"),e("th",{class:"text-left py-3 px-4 text-sm font-semibold text-gray-700"},"Publish Date"),e("th",{class:"text-left py-3 px-4 text-sm font-semibold text-gray-700"},"Views"),e("th",{class:"text-left py-3 px-4 text-sm font-semibold text-gray-700"},"Actions")])],-1)),e("tbody",null,[(u(!0),x(V,null,$(U.value,s=>(u(),x("tr",{key:s.id,class:"border-b border-gray-100 hover:bg-gray-50"},[e("td",Ee,"Week "+a(s.weekNumber),1),e("td",Je,[e("div",null,[e("p",Le,a(s.title),1),e("p",Pe,a(s.excerpt.substring(0,100))+"...",1)])]),e("td",Be,[e("span",{class:m(`px-2 py-1 rounded-full text-xs font-medium ${s.status==="PUBLISHED"?"bg-green-100 text-green-800":s.status==="DRAFT"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`)},a(s.status),3)]),e("td",Ve,a(E(s.publishDate)),1),e("td",$e,a(s.views),1),e("td",Fe,[e("div",Ne,[e("button",{onClick:r=>J(s),class:"text-blue-600 hover:text-blue-800 text-sm"}," Edit ",8,Te),e("button",{onClick:r=>P(s),class:m(`text-sm ${s.status==="PUBLISHED"?"text-orange-600 hover:text-orange-800":"text-green-600 hover:text-green-800"}`)},a(s.status==="PUBLISHED"?"Unpublish":"Publish"),11,Ae),e("button",{onClick:r=>B(s),class:"text-red-600 hover:text-red-800 text-sm"}," Delete ",8,He)])])]))),128))])])])):C("",!0)]),w.value||p.value?(u(),x("div",Me,[e("div",Ie,[e("h3",ze,a(p.value?"Edit Journal":"Create New Journal"),1),e("form",{onSubmit:W(T,["prevent"]),class:"space-y-4"},[e("div",Re,[e("div",null,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Week Number *",-1)),n(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>o.value.weekNumber=s),type:"number",required:"",class:"w-full border border-gray-300 rounded-lg px-3 py-2"},null,512),[[i,o.value.weekNumber]])]),e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Publish Date *",-1)),n(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>o.value.publishDate=s),type:"date",required:"",class:"w-full border border-gray-300 rounded-lg px-3 py-2"},null,512),[[i,o.value.publishDate]])])]),e("div",null,[t[29]||(t[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Title *",-1)),n(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>o.value.title=s),type:"text",required:"",class:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Weekly Journal Title"},null,512),[[i,o.value.title]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Excerpt",-1)),n(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=s=>o.value.excerpt=s),rows:"2",class:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Brief summary for preview..."},null,512),[[i,o.value.excerpt]])]),e("div",null,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Content *",-1)),n(e("textarea",{"onUpdate:modelValue":t[11]||(t[11]=s=>o.value.content=s),rows:"12",required:"",class:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Write your journal content here..."},null,512),[[i,o.value.content]])]),e("div",We,[e("div",null,[t[33]||(t[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),n(e("select",{"onUpdate:modelValue":t[12]||(t[12]=s=>o.value.status=s),class:"w-full border border-gray-300 rounded-lg px-3 py-2"},[...t[32]||(t[32]=[e("option",{value:"DRAFT"},"Draft",-1),e("option",{value:"PUBLISHED"},"Published",-1),e("option",{value:"SCHEDULED"},"Scheduled",-1)])],512),[[S,o.value.status]])]),e("div",null,[t[35]||(t[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Featured",-1)),n(e("select",{"onUpdate:modelValue":t[13]||(t[13]=s=>o.value.featured=s),class:"w-full border border-gray-300 rounded-lg px-3 py-2"},[...t[34]||(t[34]=[e("option",{value:!1},"No",-1),e("option",{value:!0},"Yes",-1)])],512),[[S,o.value.featured]])])]),e("div",null,[t[36]||(t[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Tags",-1)),n(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>o.value.tags=s),type:"text",class:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"Comma separated tags"},null,512),[[i,o.value.tags]])]),e("div",qe,[e("button",Ye,a(p.value?"Update Journal":"Create Journal"),1),e("button",{type:"button",onClick:L,class:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400"}," Cancel ")])],32)])])):C("",!0)])]),_:1}))}},Ke=A(Ge,[["__scopeId","data-v-cb39ccea"]]);export{Ke as default};
